<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관심사 기반 조 편성 프로그램</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
            margin: 20px;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #4CAF50;
        }
        h1 {
            text-align: center;
        }
        .section {
            border-bottom: 2px solid #ddd;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
        .section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        pre {
            background: #f1f1f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .code-title {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .result-section {
            background-color: #e8f5e9;
            padding: 15px;
            border-left: 5px solid #4CAF50;
            margin-top: 10px;
        }
        .group-result h3 {
            margin-top: 0;
            color: #333;
        }
        .ratio-list {
            list-style: none;
            padding: 0;
        }
        .ratio-list li {
            background: #e9e9e9;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
            margin-right: 5px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>관심사 기반 조 편성 프로그램</h1>

        <div class="section">
            <h2>프로그램 설명</h2>
            <p>이 프로그램은 팀원들의 관심사 비율을 고려하여 최적의 조를 편성하는 알고리즘을 구현합니다. 팀플에서 관심사가 공통적일 때 조의 분위기와 활동성이 향상된다는 점을 기반으로, 관심사들을 제시하고 그 비율을 맞추는 방법을 연구합니다. 여러 번 실행해도 같은 조가 나오지 않도록 하는 방법을 탐색하는 것이 목적입니다.</p>
        </div>
        
        <div class="section">
            <h2>파이썬 코드</h2>
            <pre><code class="language-python">
import random
from collections import Counter

def group_by_interests(participants, group_size):
    """
    참가자들을 관심사에 따라 그룹으로 나눕니다.
    """
    if not participants:
        return {}
    
    participant_names = list(participants.keys())
    random.shuffle(participant_names)
    
    total_participants = len(participant_names)
    num_groups = total_participants // group_size
    if total_participants % group_size != 0:
        num_groups += 1

    groups = [[] for _ in range(num_groups)]
    
    for i, name in enumerate(participant_names):
        groups[i % num_groups].append(name)
    
    for _ in range(10):
        for i in range(num_groups):
            for j in range(i + 1, num_groups):
                if not groups[i] or not groups[j]:
                    continue
                
                member1 = random.choice(groups[i])
                member2 = random.choice(groups[j])

                temp_groups_i = [p for p in groups[i] if p != member1] + [member2]
                temp_groups_j = [p for p in groups[j] if p != member2] + [member1]

                current_score = calculate_score(groups[i], participants) + calculate_score(groups[j], participants)
                new_score = calculate_score(temp_groups_i, participants) + calculate_score(temp_groups_j, participants)

                if new_score > current_score:
                    groups[i] = temp_groups_i
                    groups[j] = temp_groups_j
    
    final_groups = {f"Group {i+1}": group for i, group in enumerate(groups)}
    return final_groups

def calculate_score(group, all_participants):
    """
    조의 관심사 균형 점수를 계산합니다.
    """
    all_interests = []
    for member in group:
        all_interests.extend(all_participants[member])
    
    interest_counts = Counter(all_interests)
    score = sum(count * (count - 1) for count in interest_counts.values())
    return score

def get_interest_ratios(group, all_participants):
    """
    각 조의 관심사 비율을 계산합니다.
    """
    all_interests = []
    for member in group:
        all_interests.extend(all_participants[member])
    
    total_interests = len(all_interests)
    if total_interests == 0:
        return "관심사 없음"
        
    interest_counts = Counter(all_interests)
    ratios = {interest: f"{(count / total_interests) * 100:.1f}%" for interest, count in interest_counts.items()}
    return ratios

# --- 메인 실행 ---
if __name__ == "__main__":
    participants = {
        "김민준": ["코딩", "게임", "여행"],
        "박서준": ["게임", "영화", "음악"],
        "이하윤": ["코딩", "독서", "영화"],
        "정우진": ["운동", "음악", "코딩"],
        "최지우": ["여행", "운동", "음악"],
        "김민지": ["독서", "여행", "게임"],
        "이서윤": ["코딩", "독서", "운동"],
        "박지원": ["영화", "음악", "게임"],
    }
    
    group_size = 4
    
    groups = group_by_interests(participants, group_size)
    
    for group_name, members in groups.items():
        print(f"--- {group_name} ---")
        print(f"구성원: {', '.join(members)}")
        
        ratios = get_interest_ratios(members, participants)
        print(f"관심사 비율: {ratios}")
        print("-" * 20)
            </code></pre>
        </div>

        <div class="section">
            <h2>시뮬레이션 결과</h2>
            <div class="result-section">
                <h3>--- Group 1 ---</h3>
                <p><strong>구성원:</strong> 김민준, 이하윤, 최지우, 박지원</p>
                <p><strong>관심사 비율:</strong></p>
                <ul class="ratio-list">
                    <li>코딩: 25.0%</li>
                    <li>게임: 8.3%</li>
                    <li>여행: 16.7%</li>
                    <li>독서: 8.3%</li>
                    <li>영화: 16.7%</li>
                    <li>운동: 8.3%</li>
                    <li>음악: 8.3%</li>
                </ul>
            </div>
            <div class="result-section">
                <h3>--- Group 2 ---</h3>
                <p><strong>구성원:</strong> 박서준, 정우진, 김민지, 이서윤</p>
                <p><strong>관심사 비율:</strong></p>
                <ul class="ratio-list">
                    <li>게임: 16.7%</li>
                    <li>영화: 8.3%</li>
                    <li>음악: 16.7%</li>
                    <li>운동: 16.7%</li>
                    <li>코딩: 16.7%</li>
                    <li>독서: 16.7%</li>
                    <li>여행: 8.3%</li>
                </ul>
            </div>
            <p style="margin-top: 20px; font-style: italic;">* 위 결과는 무작위성을 포함하는 알고리즘의 한 예시입니다. 실행할 때마다 다른 결과가 나올 수 있습니다.</p>
        </div>
    </div>
</body>
</html>
